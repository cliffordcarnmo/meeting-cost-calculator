<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>Meeting cost calculator</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">		
        <style type="text/css">
			#meetingCost{
                color: #ff0000;
				font-weight: bold;
				font-size: 10em;
            }
		</style>
		<script>
		    class Meeting{
				constructor(){
					this.participants = [];
					this.startTime = new Date();
				}

				addParticipants(role){
					this.participants.push(role);
				}
				
				getParticipants(){
					return this.participants;
				}
				
				getStartTime(){
					return this.startTime;
				}

				getElapsedTime(){
					let diff = new Date() - this.startTime;
					diff /= 1000;
					return Math.round(diff);
				}
			}

			class Role{
				constructor(name, yearlyWage, socialCost){
					this.name = name;
					this.yearlyWage = yearlyWage;
					this.socialCost = socialCost;
				}

				getName(){
					return this.name;
				}

				getYearlyWave(){
					return this.yearlyWage;
				}

				getSalaryPerSecond(){
					return this.yearlyWage / 12 / 20 / 8 / 60 / 60;
				}

				getSocialCost(){
					return this.socialCost;
				}
			}

			var totalMeetingCost = 0;
			var totalMeetingCostPerSecond = 0;
			var meetingParticipantArray = [];

			// TODO can socialCost be calculated somehow in this object?
			/*
			var Role = function(name, yearlyWage) {
				this.name = name;
				this.yearlyWage = yearlyWage;
			};
			*/

			function addRoleCostPerSecond(role)
			{
				totalMeetingCostPerSecond += (role.yearlyWage / 12 / 20 / 8 / 60 / 60);
			}

		    function showMeetingCost(meetingCostPerSecond){
		        totalMeetingCost += meetingCostPerSecond;
		        document.getElementById("meetingCost").innerHTML = "â‚¬" + totalMeetingCost.toFixed(2);
		    }

		    function calculateCost(){
		        var meetingParticipants = parseInt(document.getElementById("meetingParticipants").value);
		        var averageSalary = parseInt(document.getElementById("averageSalary").value);
		        var socialCost = parseInt(document.getElementById("socialCost").value);
		        averageSalary += averageSalary * socialCost;
		        var averageSalaryPerSecond = averageSalary / 20 / 8 / 60 / 60;
		        var meetingCostPerSecond = averageSalaryPerSecond * meetingParticipants;
		        setInterval(showMeetingCost, 1000, meetingCostPerSecond);
		    }

			function calculateCostPerSecond() {
				meetingParticipantArray.forEach(addRoleCostPerSecond)
				setInterval(showMeetingCost, 1000, totalMeetingCostPerSecond);
			}


		</script>
    </head>
	<body>
        <div class="container pt-3">
            <h1 class="display-1">Meeting Cost Calculator</h1>
            <p>Enter the number of meeting participants</p>
            <p><input class="form-control" type="text" id="meetingParticipants"></p>
            <p>Enter the average monthly salary of the meeting participants (in Euro, before taxes)</p>
            <p><input class="form-control" type="text" id="averageSalary"> </p>
            <p>Enter the social/state cost of employment</p>
            <p><input class="form-control" type="text" id="socialCost" value="0.3142"> </p>
            <p><input class="btn btn-primary" type="submit" value="Start meeting" onClick="calculateCost()">
            <input class="btn btn-danger" type="submit" value="Reset" onClick="location.reload()"></p>
            <div id="meetingCost"></div>
        </div>
    </body>
</html>
