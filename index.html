<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>Meeting cost calculator</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">		
		<script>
			class Meeting{
				constructor(){
					this.startTime = 0;
					this.meetingCost = 0;
					this.participants = [];
				}

				startMeeting(){
					this.startTime = new Date();
					setInterval(this.showMeetingCost, 1000);
				}

				showMeetingCost(){
					document.getElementById("meetingCost").innerHTML = "<p>Elapsed time: <strong>" + new Date(m.getElapsedTime() * 1000).toISOString().substr(11, 8) + "</strong></p><p>Estimated cost: <strong>â‚¬" + m.getMeetingCostPerSecond().toFixed(2) + "</strong></p>";
				}

				addParticipants(role){
					this.participants.push(role);
				}

				clearParticipants(){
					this.participants = [];
				}

				getParticipants(){
					return this.participants;
				}

				getStartTime(){
					return this.startTime;
				}

				getElapsedTime(){
					let diff = new Date() - this.startTime;
					diff /= 1000;
					return Math.round(diff);
				}

				getMeetingCostPerSecond() {
					for (let i = 0; i < this.participants.length; i++) {
						this.meetingCost += this.participants[i].getSalaryPerSecond();
					}
					return this.meetingCost;
				}
			}

			class Role{
				constructor(name, averageWage, socialCost){
					this.name = name;
					this.averageWage = averageWage;
					this.socialCost = socialCost;
				}

				getName(){
					return this.name;
				}

				getMonthlyWage(){
					return this.averageWage;
				}

				getSalaryPerSecond(){
				const workableDaysInMonth = 21;
				const workableHoursInDay = 8;
				const minutesInHour = 60;
				const secondsInMinute = 60;
					return this.averageWave / workableDaysInMonth / workableHoursInDay / minutesInHour / secondsInMinute;
				}

				getSocialCost(){
					return this.socialCost;
				}
			}

			let m = new Meeting();

			function startTicker() {
				let participant = new Role(document.getElementById("roleName").value, parseInt(document.getElementById("roleWage").value), parseInt(document.getElementById("averageSocialCost").value));
				let participants = parseInt(document.getElementById("roleCount").value);

				for(let i = 0; i < participants; i++){
					m.addParticipants(participant);
				}

				m.startMeeting();
			}
		</script>
	</head>
	<body>
		<div class="container p-3">
			<div class="row">
				<div class="col">
					<h1 class="display-1">Meeting Cost Calculator</h1>
				</div>
			</div>

			<div class="row">
				<div class="col">
					<div id="meetingCost" class="text-danger display-3"></div>
				</div>
			</div>

			<div class="row">
				<div class="col-4">
					<label for="socialCost" class="form-label">Average monthly wage in EUR</label>
					<input class="form-control" type="text" id="roleWage" value="57456">
				</div>
				<div class="col-4">
					<label for="socialCost" class="form-label">Enter the social/state cost of employment</label>
					<input class="form-control" type="text" id="averageSocialCost" value="0.3142">
				</div>
			</div>

			<div class="row">
				<div class="col-4">
					<label for="roleName" class="form-label">Participant role</label>
					<input class="form-control" type="text" id="roleName" value="Average IT worker">
				</div>
				<div class="col-4">
					<label for="socialCost" class="form-label">Number of participants in this meeting</label>
					<input class="form-control" type="text" id="roleCount" value="5">
				</div>
			</div>

			<div class="row">
				<div class="col pt-3">
					<input class="btn btn-primary" type="submit" value="Start meeting" onClick="startTicker()">
					<input class="btn btn-danger" type="submit" value="Reset" onClick="location.reload()"></p>
				</div>
			</div>
		</div>
	</body>
</html>